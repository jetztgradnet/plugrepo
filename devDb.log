/*C1*/SET SCHEMA PUBLIC
CONNECT USER SA
drop table plugin if exists
drop table plugin_version if exists
drop table repository if exists
create table plugin (id bigint generated by default as identity (start with 1), version bigint not null, author varchar(255), default_version varchar(255) not null, description varchar(255), name varchar(255) not null, primary key (id))
create table plugin_version (id bigint generated by default as identity (start with 1), version bigint not null, file_token varchar(255) not null, plugin_id bigint not null, repository_id bigint, version_string varchar(255) not null, primary key (id))
create table repository (id bigint generated by default as identity (start with 1), version bigint not null, description varchar(255) not null, name varchar(255) not null, password varchar(255), priority integer not null, repositoryurl varchar(255) not null, user_name varchar(255), primary key (id))
alter table plugin_version add constraint FK658F4FCCE5CAAC0A foreign key (plugin_id) references plugin
alter table plugin_version add constraint FK658F4FCC7B0488AA foreign key (repository_id) references repository
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
INSERT INTO PLUGIN VALUES(1,0,NULL,'1.0',NULL,'grails-myplug1-0.1.zip')
INSERT INTO PLUGIN_VERSION VALUES(1,0,'grails-myplug1-0.1.zip',1,NULL,'1.0')
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
INSERT INTO PLUGIN_VERSION VALUES(2,0,'grails-myplug1-0.1.zip',1,NULL,'1.0')
DELETE FROM PLUGIN WHERE ID=1
INSERT INTO PLUGIN VALUES(1,1,NULL,'1.0',NULL,'grails-myplug1-0.1.zip')
